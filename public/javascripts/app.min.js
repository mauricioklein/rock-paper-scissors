(a=>{a.ApiProxy={call:(a,b,c)=>{return fetch(`/game/${a}`,{method:'POST',headers:{"Content-Type":'application/json'},body:JSON.stringify({p1_choice:b,p2_choice:c})}).then(a=>a.json()).catch(a=>console.error(a))}}})(window),(()=>{const a=$('#gameType').val(),b={p2:{container:$('#p2-container'),choice:$('#p2-container > #choice')},winner:$('#winner'),result:$('#result'),newGame:$('#new-game')},c=a=>`/images/game-options/${a}.png`,d=(b=null,c=null)=>window.ApiProxy.call(a,b,c),e=a=>{h(a.player_1_choice),b.p2.choice.attr('src',c(a.player_2_choice)),b.winner.text(g(a.winner)),b.p2.container.removeClass('hidden'),b.result.removeClass('hidden')},f=()=>{i(),b.p2.container.addClass('hidden'),b.result.addClass('hidden')},g=a=>'Player 1'===a?'You won!':'Player 2'===a?'You lost!':'Draw!',h=a=>{$('[id^=gameOption-]').filter((b,c)=>c.value!==a).addClass('hidden')},i=()=>{$('[id^=gameOption-]').removeClass('hidden')};$('[id^=gameOption-]').on('click',a=>{d(a.target.value).then(a=>e(a))}),b.newGame.on('click',()=>{f()})})();